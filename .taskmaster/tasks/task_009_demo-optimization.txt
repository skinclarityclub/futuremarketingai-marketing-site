# Task ID: 9
# Title: Integrate Advanced Analytics and Event Tracking
# Status: pending
# Dependencies: 1, 3, 4
# Priority: high
# Description: Track all critical user interactions, define funnels, and prepare for A/B testing.
# Details:
Extend `usePageAnalytics` hook to fire GA4 and Hotjar events for all specified actions. Use custom events for calculator, CTAs, modals, and scroll depth. Define funnels in GA4. Prepare A/B testing framework (e.g., LaunchDarkly, Split.io, or custom context-based variant logic). Build a simple dashboard (Next.js API route + Chart.js) for demo performance.

# Test Strategy:
Verify event firing via GA4/Hotjar debug tools. Test funnel data in GA4. Simulate A/B test variants and confirm correct assignment.

# Subtasks:
## 1. Extend usePageAnalytics Hook for GA4 and Hotjar Event Tracking [pending]
### Dependencies: None
### Description: Update the usePageAnalytics React hook to fire Google Analytics 4 (GA4) and Hotjar events for all specified user actions, including calculator usage, CTA clicks, modal interactions, and scroll depth.
### Details:
Implement event dispatch logic for GA4 and Hotjar within the hook. Ensure custom events are structured for each critical interaction type and verify compatibility with both analytics platforms.

## 2. Define and Configure Funnels in GA4 [pending]
### Dependencies: 9.1
### Description: Set up funnels in GA4 to track user progression through key flows, such as calculator usage, CTA engagement, and modal interactions.
### Details:
Create custom funnel reports in GA4 using the Explorations feature. Specify funnel steps based on tracked events and configure relevant dimensions and metrics for analysis.

## 3. Integrate Hotjar with GA4 for Enhanced Qualitative Insights [pending]
### Dependencies: 9.1
### Description: Connect Hotjar and GA4 to enable filtering Hotjar recordings and heatmaps by GA4 events, and send Hotjar user IDs to GA4 for deeper user experience analysis.
### Details:
Configure Hotjarâ€™s GA4 integration, set up custom dimensions in GA4 for Hotjar user IDs, and ensure event mapping between platforms for cross-tool analysis.

## 4. Prepare and Implement A/B Testing Framework [pending]
### Dependencies: 9.1
### Description: Set up an A/B testing framework using LaunchDarkly, Split.io, or custom context-based variant logic to support controlled experiments on tracked user interactions.
### Details:
Integrate the chosen A/B testing tool or implement custom logic for variant assignment. Ensure tracked events include variant metadata for analytics and reporting.

## 5. Build Demo Performance Dashboard with Next.js API and Chart.js [pending]
### Dependencies: 9.2, 9.3, 9.4
### Description: Develop a simple dashboard using a Next.js API route and Chart.js to visualize demo performance metrics, including tracked events, funnel completion rates, and A/B test results.
### Details:
Design API endpoints to aggregate analytics data and implement Chart.js visualizations for key metrics. Ensure dashboard updates in real time and supports demo analysis.

