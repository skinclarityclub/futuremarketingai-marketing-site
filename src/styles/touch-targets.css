/**
 * Touch Target & Spacing Standards
 * 
 * Defines standards for interactive element sizing and spacing
 * according to Apple HIG and WCAG 2.1 AAA guidelines.
 */

@layer utilities {
  /* Touch Target Sizes - Apple HIG */
  .tap-target-sm {
    min-width: 44px;
    min-height: 44px;
  }

  /* Touch Target Sizes - WCAG AAA (Recommended) */
  .tap-target,
  .tap-target-md {
    min-width: 48px;
    min-height: 48px;
  }

  /* Touch Target Sizes - Comfortable */
  .tap-target-lg {
    min-width: 56px;
    min-height: 56px;
  }

  /* Touch Target Sizes - Extra Large (for primary CTAs) */
  .tap-target-xl {
    min-width: 64px;
    min-height: 64px;
  }

  /* Touch Active State */
  .touch-active {
    -webkit-tap-highlight-color: transparent;
    user-select: none;
  }

  /* Prevent text selection on interactive elements */
  .no-select {
    -webkit-user-select: none;
    -moz-user-select: none;
    -ms-user-select: none;
    user-select: none;
  }

  /* Minimum spacing between interactive elements */
  .touch-spacing-sm {
    margin: 4px;
  }

  .touch-spacing,
  .touch-spacing-md {
    margin: 8px;
  }

  .touch-spacing-lg {
    margin: 12px;
  }

  /* Safe area for notched devices */
  .safe-area-inset-top {
    padding-top: env(safe-area-inset-top);
  }

  .safe-area-inset-bottom {
    padding-bottom: env(safe-area-inset-bottom);
  }

  .safe-area-inset-left {
    padding-left: env(safe-area-inset-left);
  }

  .safe-area-inset-right {
    padding-right: env(safe-area-inset-right);
  }

  .safe-area-inset {
    padding-top: env(safe-area-inset-top);
    padding-right: env(safe-area-inset-right);
    padding-bottom: env(safe-area-inset-bottom);
    padding-left: env(safe-area-inset-left);
  }

  /* Safe area utilities */
  .pb-safe {
    padding-bottom: env(safe-area-inset-bottom, 0);
  }

  .h-safe {
    height: env(safe-area-inset-bottom, 0);
  }

  /* Focus visible for keyboard navigation */
  .focus-ring {
    @apply focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-accent-primary focus-visible:ring-offset-2 focus-visible:ring-offset-bg-dark;
  }

  /* Accessible clickable area expansion */
  .expand-tap-target::before {
    content: '';
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    min-width: 48px;
    min-height: 48px;
    width: 100%;
    height: 100%;
  }

  /* Relative positioning for expand-tap-target */
  .relative-tap {
    position: relative;
  }
}

/* Mobile-specific touch styles */
@media (hover: none) and (pointer: coarse) {
  /* Remove hover effects on touch devices */
  .touch-device-no-hover:hover {
    transform: none !important;
  }

  /* Increase tap target size on mobile */
  .mobile-tap-large {
    min-width: 56px;
    min-height: 56px;
  }

  /* Better touch feedback */
  .touch-feedback:active {
    opacity: 0.7;
    transform: scale(0.97);
  }
}

/* High contrast mode support */
@media (prefers-contrast: high) {
  .tap-target,
  .tap-target-sm,
  .tap-target-md,
  .tap-target-lg,
  .tap-target-xl {
    outline: 2px solid currentColor;
    outline-offset: 2px;
  }
}

/* Reduced motion support */
@media (prefers-reduced-motion: reduce) {
  .touch-feedback:active,
  .touch-active {
    transform: none !important;
    transition: none !important;
  }
}

